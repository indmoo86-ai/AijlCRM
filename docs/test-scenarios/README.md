# AijlCRM 测试场景文档

## 📚 文档概览

本目录包含AijlCRM系统的完整测试场景文档，覆盖全部11个业务模块的79个测试场景。

### 文档状态

- **完成度**: 100% ✅
- **场景总数**: 79个
- **测试步骤**: 约2,000+步
- **文档版本**: v4.0
- **最后更新**: 2025-12-27

---

## 📂 文档结构

### 核心文档

| 文档名称 | 场景数 | 说明 |
|---------|--------|------|
| `TEST-COVERAGE-COMPLETE-INDEX.md` | 79个 | **测试覆盖率索引**，所有场景的总览和统计 |
| `TEST-SCENARIOS-COMPLETE-SUPPLEMENTS.md` | 49个 | **补充场景详细文档**，包含P0/P1/P2优先级场景 |
| `DETAILED-TEST-CHECKLIST.md` | 30个 | **基础场景详细文档**，包含各模块基础CRUD操作 |
| `DETAILED-TEST-CHECKLIST-SUPPLEMENT.md` | 部分 | **早期补充文档**，包含部分发票和售后服务场景 |

### 辅助文档

- `LESSONS_LEARNED.md` - 测试过程中的问题总结和经验教训

---

## 🎯 场景分布

### 按业务模块

| 模块 | 场景数 | 覆盖率 | 优先级 |
|------|--------|--------|--------|
| 用户认证 | 2 | 100% ✅ | 基础 |
| 产品管理 | 6 | 100% ✅ | P2 |
| 客户管理 | 7 | 100% ✅ | P0/P2 |
| 线索管理 | 8 | 100% ✅ | P2 |
| 报价单管理 | 7 | 100% ✅ | P1 |
| 合同管理 | 10 | 100% ✅ | P0 |
| 任务管理 | 8 | 100% ✅ | P1 |
| 发货管理 | 8 | 100% ✅ | P1 |
| 收款管理 | 8 | 100% ✅ | P0 |
| 发票管理 | 8 | 100% ✅ | P0 |
| 售后服务 | 9 | 100% ✅ | P0 |
| **总计** | **79** | **100%** ✅ | - |

### 按优先级分布

| 优先级 | 场景数 | 说明 |
|--------|--------|------|
| **P0** | 26个 | 核心业务流程（合同、收款、发票、售后、客户核心） |
| **P1** | 15个 | 重要增强功能（报价、发货、任务） |
| **P2** | 8个 | 优化辅助功能（产品、线索、客户辅助） |
| **基础** | 30个 | 各模块基础CRUD操作 |

---

## 📖 文档特点

### 每个测试场景包含

1. **需求编号** - 关联的用户故事编号
2. **场景名称** - 清晰的场景描述
3. **测试数据** - 完整的JavaScript测试数据对象
4. **详细步骤** - 20-60个具体操作步骤，包含：
   - 操作描述
   - 输入数据
   - CSS选择器
   - 预期结果
   - 验证点
5. **API响应示例** - 详细的JSON请求/响应示例
6. **业务规则** - 明确的业务逻辑说明
7. **截图标注** - 所需截图的文件名

### 文档格式示例

```markdown
## 场景CONTRACT-002: 合同条款管理

**需求编号**: CONTRACT-002
**场景名称**: 合同付款条款、交货条款、质保条款管理

**测试数据**:
```javascript
const paymentTermsData = {
  contractId: null,
  contractAmount: 50000,
  paymentTerms: [
    {stage: 1, stageName: '签约款', percentage: 30, amount: 15000, dueDate: '2025-01-15'},
    {stage: 2, stageName: '发货款', percentage: 40, amount: 20000, dueDate: '2025-02-01'}
  ]
};
```

**测试步骤**（54步）:
| 步骤 | 操作 | 输入数据 | 选择器 | 预期结果 | 验证点 |
|------|------|---------|--------|---------|--------|
| 1-2 | 进入合同详情页 | contractId | `a[href="/contracts/1"]` | 合同详情加载 | 详情显示 |
...
```

---

## 🚀 使用指南

### 1. 查看测试场景

**从索引开始**：
```bash
cat docs/test-scenarios/TEST-COVERAGE-COMPLETE-INDEX.md
```

**查看特定模块场景**：
- 合同管理: `TEST-SCENARIOS-COMPLETE-SUPPLEMENTS.md` (搜索"模块6")
- 收款管理: `TEST-SCENARIOS-COMPLETE-SUPPLEMENTS.md` (搜索"模块9")
- 发票管理: `TEST-SCENARIOS-COMPLETE-SUPPLEMENTS.md` (搜索"模块10")

### 2. 编写自动化测试

**基于文档编写Playwright测试**：

```javascript
// 示例：基于场景CONTRACT-002编写测试
import { test, expect } from '@playwright/test';

test('合同条款管理', async ({ page }) => {
  // 步骤1-2: 进入合同详情页
  await page.goto('/contracts/1');
  await expect(page).toHaveTitle(/合同详情/);

  // 步骤3-4: 点击"条款管理"标签
  await page.click('tab:has-text("条款管理")');

  // 步骤5-6: 点击"设置付款条款"按钮
  await page.click('button:has-text("设置付款条款")');

  // ... 按照文档步骤继续
});
```

### 3. 执行测试建议

**按优先级执行**：
1. P0场景（核心业务）- 必须通过
2. P1场景（重要功能）- 应该通过
3. P2场景（辅助功能）- 优化通过

**按业务流程执行**：
```
线索管理 → 客户管理 → 报价单 → 合同签订 →
发货管理 → 收款管理 → 发票管理 → 售后服务
```

---

## 📊 覆盖率报告

### 整体覆盖情况

- ✅ 用户故事覆盖: 79/79 (100%)
- ✅ 测试场景完成: 79/79 (100%)
- ✅ 核心业务流程: 26/26 (100%)
- ✅ 关键功能点: 2000+ 测试步骤

### 模块覆盖矩阵

```
用户认证   ██████████ 100%
产品管理   ██████████ 100%
客户管理   ██████████ 100%
线索管理   ██████████ 100%
报价单     ██████████ 100%
合同管理   ██████████ 100%
任务管理   ██████████ 100%
发货管理   ██████████ 100%
收款管理   ██████████ 100%
发票管理   ██████████ 100%
售后服务   ██████████ 100%
```

---

## ✅ 完成里程碑

### 2025-12-26
- ✅ 创建基础测试场景文档 (30个场景)
- ✅ 创建测试覆盖率索引文档

### 2025-12-27
- ✅ 补充P0优先级场景 (26个场景)
  - 合同管理 9个
  - 收款管理 7个
  - 发票管理 3个
  - 售后服务 4个
  - 客户管理核心 3个
- ✅ 补充P1优先级场景 (15个场景)
  - 报价单管理 4个
  - 发货管理 5个
  - 任务管理 6个
- ✅ 补充P2优先级场景 (8个场景)
  - 产品管理 4个
  - 线索管理 3个
  - 客户管理辅助 2个
- ✅ 更新测试覆盖率索引至100%
- ✅ 完成全部文档整理

---

## 🔄 下一步计划

### 短期（1-2周）
1. **编写自动化测试脚本**
   - 使用Playwright编写E2E测试
   - 优先实现P0场景的自动化
   - 建立测试数据准备机制

2. **执行完整测试**
   - 按P0→P1→P2顺序执行
   - 记录测试结果和发现的问题
   - 生成测试报告

### 中期（3-4周）
3. **优化测试场景**
   - 基于测试结果完善场景文档
   - 补充遗漏的边缘情况
   - 优化测试数据和步骤

4. **建立CI/CD集成**
   - 集成到GitHub Actions
   - 每次提交自动运行测试
   - 生成覆盖率报告

### 长期（持续）
5. **持续维护**
   - 随需求变更更新场景
   - 添加新功能的测试场景
   - 定期review和优化

---

## 👥 贡献指南

### 更新测试场景

1. 确定场景所属模块和优先级
2. 在相应文档中添加场景
3. 遵循统一的格式模板
4. 更新覆盖率索引文档
5. 提交PR并说明变更

### 报告问题

如发现文档问题或场景缺陷：
1. 在GitHub Issues中创建issue
2. 标注问题类型（文档错误/场景缺失/步骤不清晰等）
3. 提供具体的改进建议

---

## 📞 联系方式

- **项目仓库**: AijlCRM
- **文档维护**: Claude AI
- **技术栈**: Vue 3 + Express + MySQL + Playwright

---

**版本**: v4.0
**状态**: ✅ 已完成
**最后更新**: 2025-12-27
**覆盖率**: 100%
