# 智慧酒店CRM系统产品需求文档 (PRD)

**版本**: V2.0
**日期**: 2024年12月

---

## 目录

1. [项目概述](#1-项目概述)
2. [功能模块总览](#2-功能模块总览)
3. [页面功能详细设计](#3-页面功能详细设计)
4. [数据库表结构设计](#4-数据库表结构设计)
5. [核心业务流程](#5-核心业务流程)

---

## 1. 项目概述

### 1.1 背景与目标
本系统旨在为智慧酒店解决方案销售团队提供一套完整的客户关系管理平台，实现从销售线索获取到客户全生命周期管理的数字化、标准化管理。

### 1.2 核心价值
- 统一管理新媒体渠道（抖音、小红书等）获取的销售线索
- 规范销售跟进流程，提升线索转化率
- 打通合同、发货、运维、财务全流程
- 支持客户二次销售和转介绍管理

### 1.3 用户角色

| 角色 | 职责 | 主要功能 |
|------|------|----------|
| 销售人员 | 线索跟进、客户维护 | 线索管理、跟进记录、合同录入 |
| 新媒体运营 | 线索录入、渠道管理 | 线索创建、渠道分析 |
| 销售主管 | 团队管理、业绩分析 | 线索分配、数据看板、审批 |
| 运维人员 | 项目交付、售后服务 | 运维工单、服务记录 |
| 财务人员 | 收款开票管理 | 回款登记、发票管理 |

---

## 2. 功能模块总览

| 模块 | 核心功能 | 说明 |
|------|----------|------|
| 线索管理 | 线索录入、分配、跟踪、转化 | 管理从各渠道获取的潜在客户信息 |
| 客户管理 | 客户档案、联系人、标签 | 统一管理已转化的客户信息 |
| 商机管理 | 商机创建、阶段推进、赢单 | 跟踪具体项目的销售进展 |
| 合同管理 | 合同创建、审批、归档 | 管理销售合同全流程 |
| 订单发货 | 订单创建、发货跟踪 | 管理产品交付流程 |
| 运维服务 | 工单管理、服务记录 | 管理售后运维服务 |
| 财务管理 | 收款、开票、对账 | 管理应收账款和发票 |
| 数据看板 | 销售漏斗、业绩统计 | 多维度数据分析展示 |

---

## 3. 页面功能详细设计

详细的页面设计请参考原需求文档，这里列出核心页面：

### 3.1 线索管理模块
- 线索列表页 (`/leads/list`)
- 线索详情页 (`/leads/detail/:id`)
- 新建/编辑线索弹窗
- 添加跟进记录弹窗
- 转为客户弹窗

### 3.2 客户管理模块
- 客户列表页 (`/customers/list`)
- 客户360°详情页 (`/customers/detail/:id`)
- 新建/编辑客户弹窗
- 添加联系人弹窗

### 3.3 商机管理模块
- 商机看板页 (`/opportunities/board`)
- 商机列表页 (`/opportunities/list`)
- 新建商机弹窗
- 商机阶段推进弹窗
- 赢单/丢单确认弹窗

### 3.4 合同管理模块
- 合同列表页 (`/contracts/list`)
- 新建合同页面 (`/contracts/create`)
- 合同详情页 (`/contracts/detail/:id`)

### 3.5 订单发货模块
- 订单列表页 (`/orders/list`)
- 新建订单弹窗
- 发货操作弹窗

### 3.6 运维服务模块
- 工单列表页 (`/tickets/list`)
- 工单详情页 (`/tickets/detail/:id`)
- 新建工单弹窗
- 处理记录弹窗

### 3.7 财务管理模块
- 收款管理页 (`/finance/payments`)
- 发票管理页 (`/finance/invoices`)
- 登记收款弹窗
- 开票申请弹窗

### 3.8 数据看板
- 数据看板页 (`/dashboard`)
  - 销售漏斗
  - 渠道分析
  - 业绩统计
  - 回款统计
  - 客户分析

---

## 4. 数据库表结构设计

完整的数据库表结构请参考 `database/schema.sql`，核心表包括：

### 核心表
1. `t_user` - 用户表
2. `t_lead` - 线索表
3. `t_customer` - 客户表
4. `t_customer_contact` - 客户联系人表
5. `t_follow_up` - 跟进记录表（通用）
6. `t_opportunity` - 商机表
7. `t_contract` - 合同表
8. `t_contract_product` - 合同产品明细表
9. `t_contract_payment_plan` - 合同付款计划表
10. `t_order` - 订单表
11. `t_order_product` - 订单产品明细表
12. `t_ticket` - 工单表
13. `t_ticket_record` - 工单处理记录表
14. `t_payment` - 收款记录表
15. `t_invoice` - 发票管理表
16. `t_operation_log` - 操作日志表

### 表关系
```
t_lead (线索)
  ↓ 转化
t_customer (客户) ←─ t_customer_contact (联系人)
  ↓ 创建
t_opportunity (商机)
  ↓ 赢单
t_contract (合同) ←─ t_contract_product (产品明细)
  ↓              ←─ t_contract_payment_plan (付款计划)
  ├→ t_order (订单)
  ├→ t_payment (收款)
  ├→ t_invoice (发票)
  └→ t_ticket (工单)

t_follow_up (跟进记录) ← 关联到线索/客户/商机
t_operation_log (操作日志) ← 记录所有业务操作
```

---

## 5. 核心业务流程

### 5.1 线索全生命周期流程

```
线索录入 → 线索分配 → 销售跟进 → 转为客户 → 创建商机 → 赢单成交
```

**阶段一：线索获取**
1. 新媒体运营通过抖音、小红书等渠道获取咨询线索
2. 录入系统，填写客户基本信息、渠道来源、首次咨询需求
3. 系统自动生成线索编号，状态设为【新建】

**阶段二：线索分配**
1. 销售主管查看新线索，根据区域/产品类型分配给销售
2. 分配后状态变为【跟进中】，销售收到待办提醒

**阶段三：销售跟进**
1. 销售通过电话、微信、现场等方式跟进客户
2. 每次跟进录入跟进记录，更新意向度，设置下次跟进计划
3. 长期无进展需填写停滞原因

**阶段四：线索转化**
1. 确认客户有明确需求后，点击【转客户】
2. 系统自动创建客户档案，关联原线索
3. 线索状态变为【已转化】
4. 可同步创建商机，进入销售阶段管理

### 5.2 商机成交流程

```
需求确认 → 方案报价 → 商务谈判 → 合同签订 → 赢单
```

| 阶段 | 关键动作 | 交付物 | 推进条件 |
|------|----------|--------|----------|
| 需求确认 | 了解需求、预算、决策人 | 需求调研报告 | 需求明确 |
| 方案报价 | 输出方案、产品配置、报价 | 方案书、报价单 | 客户认可 |
| 商务谈判 | 价格、商务条款确认 | 商务确认函 | 达成一致 |
| 合同签订 | 合同起草、审核、签署 | 签署合同 | 合同生效 |
| 赢单 | 结案归档 | 结案报告 | 流程结束 |

### 5.3 合同执行流程

**合同审批**: 销售提交 → 主管审核 → 财务审核 → 归档生效

**订单发货**: 创建订单 → 仓库备货 → 发货 → 物流跟踪 → 签收

**财务收款**: 应收生成 → 到账确认 → 登记收款 → 开票申请 → 发票邮寄

### 5.4 客户持续经营

**运维服务**: 客户报障 → 创建工单 → 分配处理 → 解决关闭 → 满意度评价

**二次销售**: 基于客户档案识别增购机会 → 创建新商机 → 成交

**转介绍**: 老客户推荐 → 新线索关联推荐人 → 记录转介绍关系

---

## 附录

### A. 字段枚举值

**线索渠道来源**
- 抖音沟通
- 抖音询单
- 小红书
- 官网
- 转介绍
- 其他

**线索状态**
1. 新建
2. 跟进中
3. 已转化
4. 已放弃

**客户类型**
1. 潜在客户
2. 正式客户
3. VIP客户

**行业分类**
- 星级酒店
- 经济酒店
- 精品民宿
- 长租公寓
- 其他

**商机阶段**
- 需求确认 (赢率20%)
- 方案报价 (赢率40%)
- 商务谈判 (赢率60%)
- 合同签订 (赢率80%)
- 赢单 (赢率100%)
- 丢单 (赢率0%)

**跟进方式**
- 电话
- 微信
- 现场拜访
- 视频会议
- 邮件

**意向度**
- 高
- 中
- 低
- 待定

**问题类型**
- 安装调试
- 故障维修
- 巡检保养
- 技术咨询
- 其他

**优先级**
- 低
- 中
- 高
- 紧急

---

**文档版本**: V2.0
**最后更新**: 2024-12
